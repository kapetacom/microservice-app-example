kind: core/plan
metadata:
  name: kapeta/microservice-app-example
  visibility: private
  description: See https://github.com/elgris/microservice-app-example for more information
  structure: mono
  title: Microservice Enhance
spec:
  blocks:
    - name: users-api
      id: 4a4d611a-9e24-406a-99e3-02d80bd3c5ce
      block:
        ref: kapeta://kapeta/ms-app-example-users-api:local
      dimensions:
        top: 217.32601791147545
        left: 302.1440114151335
        width: 0
        height: 0
    - name: todos-api
      id: d8cfb135-3d3c-4f24-8e3a-4e039fe8d003
      block:
        ref: kapeta://kapeta/ms-app-example-todos-api:local
      dimensions:
        top: 375.44448933664614
        left: 753.2366968816427
        width: 0
        height: 0
    - name: log-processor
      id: 30145d32-5019-4a2b-8ac5-784008905032
      block:
        ref: kapeta://kapeta/ms-app-example-log-message-processor:local
      dimensions:
        top: 586.6262241110014
        left: 743.4012555856666
        width: 0
        height: 0
    - name: auth-api
      id: b1c3e887-697d-49c3-b2f7-c4a5d74fee0b
      block:
        ref: kapeta://kapeta/ms-app-example-auth-api:local
      dimensions:
        top: 66.84446236074147
        left: 788.8858528342922
        width: 0
        height: 0
    - name: Frontend
      id: 06616ef0-1c50-425d-8f97-42b08de9fe03
      block:
        ref: kapeta://kapeta/ms-app-example-frontend:local
      dimensions:
        top: 200.81992580517183
        left: 1192.922514181371
        width: 0
        height: 0
    - block:
        ref: kapeta://kapeta/ms-app-example-gw:local
      dimensions:
        height: -1
        width: 150
        left: 1248.4302777397213
        top: 479.2924698518344
      id: 68adf213-f0f9-48dd-b8ae-679dad76a757
      name: Gateway
  connections:
    - provider:
        resourceName: auth
        blockId: b1c3e887-697d-49c3-b2f7-c4a5d74fee0b
      consumer:
        resourceName: auth
        blockId: 06616ef0-1c50-425d-8f97-42b08de9fe03
      port:
        name: rest
        type: rest
      mapping:
        getVersion:
          targetId: getVersion
          type: EXACT
        login:
          targetId: login
          type: EXACT
      id: b1c3e887-697d-49c3-b2f7-c4a5d74fee0b__auth__PROVIDES-06616ef0-1c50-425d-8f97-42b08de9fe03__auth__CONSUMES
    - provider:
        resourceName: main
        blockId: 06616ef0-1c50-425d-8f97-42b08de9fe03
      consumer:
        resourceName: main
        blockId: 68adf213-f0f9-48dd-b8ae-679dad76a757
      port:
        name: http
        type: web
    - provider:
        resourceName: users
        blockId: 4a4d611a-9e24-406a-99e3-02d80bd3c5ce
      consumer:
        resourceName: users
        blockId: b1c3e887-697d-49c3-b2f7-c4a5d74fee0b
      port:
        name: rest
        type: rest
      mapping:
        Users::getUsers:
          targetId: Users::getUsers
          type: EXACT
        Users::getUser:
          targetId: Users::getUser
          type: EXACT
        Users::login:
          targetId: Users::login
          type: EXACT
      id: 4a4d611a-9e24-406a-99e3-02d80bd3c5ce__users__PROVIDES-b1c3e887-697d-49c3-b2f7-c4a5d74fee0b__users__CONSUMES
      consumerClusterId: b1c3e887-697d-49c3-b2f7-c4a5d74fee0b__authjwtconsumer__CONSUMES|b1c3e887-697d-49c3-b2f7-c4a5d74fee0b__users__CONSUMES
      providerClusterId: 4a4d611a-9e24-406a-99e3-02d80bd3c5ce__authjwtprovider__PROVIDES|4a4d611a-9e24-406a-99e3-02d80bd3c5ce__users__PROVIDES
    - provider:
        resourceName: authjwtprovider
        blockId: 4a4d611a-9e24-406a-99e3-02d80bd3c5ce
      consumer:
        resourceName: authjwtconsumer
        blockId: b1c3e887-697d-49c3-b2f7-c4a5d74fee0b
      port:
        name: http
        type: http
    - provider:
        resourceName: authjwtprovider
        blockId: 4a4d611a-9e24-406a-99e3-02d80bd3c5ce
      consumer:
        resourceName: authjwtconsumer
        blockId: d8cfb135-3d3c-4f24-8e3a-4e039fe8d003
      port:
        name: http
        type: http
    - provider:
        resourceName: todo
        blockId: d8cfb135-3d3c-4f24-8e3a-4e039fe8d003
      consumer:
        resourceName: todo
        blockId: 06616ef0-1c50-425d-8f97-42b08de9fe03
      port:
        name: rest
        type: rest
      mapping:
        list:
          targetId: list
          type: EXACT
        create:
          targetId: create
          type: EXACT
        delete:
          targetId: delete
          type: EXACT
  configuration: {}
